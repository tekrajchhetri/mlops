schema: '2.0'
stages:
  data_preprocessing:
    cmd: python src/process.py
    deps:
    - path: src/process.py
      md5: 3e70251ec0a41c7534d1e0230200a3e5
      size: 1176
    params:
      params.yaml:
        data_source.local_path: 
          https://raw.githubusercontent.com/tekrajchhetri/mlops/master/dvc/data/red_wine.csv
    outs:
    - path: data/preprocessed
      md5: 06525fe195128341fbc9667cd3b95320.dir
      size: 91999
      nfiles: 1
  train_test_preprocessed_split:
    cmd: python src/data_split.py data/split
    deps:
    - path: data/preprocessed
      md5: 06525fe195128341fbc9667cd3b95320.dir
      size: 91999
      nfiles: 1
    - path: src/data_split.py
      md5: e2f30cd67ebe380c23ec39d0ee7d1e52
      size: 1538
    params:
      params.yaml:
        split.dir: data/split
        split.test_file: test.csv
        split.train_file: train.csv
    outs:
    - path: data/split
      md5: 3fd2968449e2eb5899e5cb4066ca0901.dir
      size: 92145
      nfiles: 2
  train:
    cmd: python src/train_model.py data/features model/trained_tuned_model.pkl
    deps:
    - path: data/split
      md5: 3fd2968449e2eb5899e5cb4066ca0901.dir
      size: 92145
      nfiles: 2
    - path: src/train_model.py
      md5: 4e64d76583a13f7f7539c23b1070c8aa
      size: 1595
    params:
      params.yaml:
        base.random_state: 55
        base.target_col: quality
        model_dir: model
        split.dir: data/split
        split.test_file: test.csv
        split.train_file: train.csv
        train.n_est: 65
    outs:
    - path: model/trained_tuned_model.pkl
      md5: 65ad0bd8fc0fe4217f6f9084f751269b
      size: 853990
  evaluate:
    cmd: python src/evaluate.py model/trained_tuned_model.pkl data/split
    deps:
    - path: data/split
      md5: 3fd2968449e2eb5899e5cb4066ca0901.dir
      size: 92145
      nfiles: 2
    - path: model/trained_tuned_model.pkl
      md5: 65ad0bd8fc0fe4217f6f9084f751269b
      size: 853990
    - path: src/evaluate.py
      md5: 8cc256d7e0a39926aa6c56c0029c8b46
      size: 3712
    outs:
    - path: eval/importance.png
      md5: b62c1ca8f14258a32cecb8ed293612df
      size: 17836
    - path: eval/live/metrics.json
      md5: 11abbf15ea4776dc75b7430d2a79e133
      size: 164
    - path: eval/live/plots
      md5: 0bedaf0ea49bbf5a6eae7f5cf3f48611.dir
      size: 110217
      nfiles: 4
    - path: eval/prc
      md5: 8ab680de134f7c2b31c64c2ebe0a0797.dir
      size: 14721
      nfiles: 2
